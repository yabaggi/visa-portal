<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<style>
  *{margin:0;padding:0;box-sizing:border-box;}

  :root{
    --primary:#1e40af;
    --accent:#3b82f6;
    --dark:#0f172a;
    --light:#f8fafc;
    --gray-100:#f1f5f9;
    --gray-200:#e2e8f0;
    --gray-400:#94a3b8;
    --gray-500:#64748b;
    --gray-600:#475569;
    --gray-800:#1e293b;
    --radius:16px;
    --shadow:0 20px 60px rgba(0,0,0,0.15);
  }

  body{
    font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;
    background:var(--dark);
    color:#fff;
    min-height:100vh;
    overflow-x:hidden;
  }

  /* ‚îÄ‚îÄ Hero Section ‚îÄ‚îÄ */
  .hero{
    position:relative;
    min-height:100vh;
    display:flex;
    flex-direction:column;
    justify-content:center;
    align-items:center;
    text-align:center;
    padding:40px 20px;
    overflow:hidden;
  }

  .hero-bg{
    position:absolute;
    inset:0;
    z-index:0;
  }

  .hero-bg img{
    width:100%;
    height:100%;
    object-fit:cover;
    opacity:0.3;
  }

  .hero-bg-gradient{
    position:absolute;
    inset:0;
    background:
      radial-gradient(ellipse at 20% 50%, rgba(30,64,175,0.4) 0%, transparent 60%),
      radial-gradient(ellipse at 80% 20%, rgba(59,130,246,0.3) 0%, transparent 50%),
      radial-gradient(ellipse at 50% 100%, rgba(15,23,42,0.9) 0%, transparent 60%),
      linear-gradient(180deg, rgba(15,23,42,0.7) 0%, rgba(15,23,42,0.4) 40%, rgba(15,23,42,0.8) 100%);
    z-index:1;
  }

  .hero-content{
    position:relative;
    z-index:2;
    max-width:800px;
    width:100%;
  }

  /* ‚îÄ‚îÄ Logo & Org ‚îÄ‚îÄ */
  .org-badge{
    display:inline-flex;
    align-items:center;
    gap:12px;
    background:rgba(255,255,255,0.08);
    backdrop-filter:blur(20px);
    -webkit-backdrop-filter:blur(20px);
    border:1px solid rgba(255,255,255,0.12);
    border-radius:60px;
    padding:10px 24px 10px 14px;
    margin-bottom:32px;
    animation:fadeDown 0.8s ease;
  }

  .org-logo{
    width:40px;
    height:40px;
    border-radius:50%;
    object-fit:cover;
    border:2px solid rgba(255,255,255,0.2);
  }

  .org-logo-placeholder{
    width:40px;
    height:40px;
    border-radius:50%;
    background:linear-gradient(135deg,var(--primary),var(--accent));
    display:flex;
    align-items:center;
    justify-content:center;
    font-size:18px;
    font-weight:700;
    color:#fff;
    flex-shrink:0;
  }

  .org-name{
    font-size:15px;
    font-weight:600;
    letter-spacing:0.5px;
    text-transform:uppercase;
    color:rgba(255,255,255,0.9);
  }

  /* ‚îÄ‚îÄ Typography ‚îÄ‚îÄ */
  .hero-title{
    font-size:clamp(32px,6vw,56px);
    font-weight:800;
    line-height:1.15;
    margin-bottom:20px;
    background:linear-gradient(135deg,#fff 30%,rgba(147,197,253,0.9));
    -webkit-background-clip:text;
    -webkit-text-fill-color:transparent;
    background-clip:text;
    animation:fadeDown 0.8s ease 0.15s both;
  }

  .hero-subtitle{
    font-size:clamp(16px,2.5vw,20px);
    color:rgba(255,255,255,0.65);
    line-height:1.6;
    max-width:600px;
    margin:0 auto 16px;
    animation:fadeDown 0.8s ease 0.3s both;
  }

  /* ‚îÄ‚îÄ Announcement ‚îÄ‚îÄ */
  .announcement{
    display:inline-block;
    background:rgba(251,191,36,0.15);
    border:1px solid rgba(251,191,36,0.3);
    color:#fbbf24;
    font-size:14px;
    padding:8px 20px;
    border-radius:30px;
    margin-bottom:40px;
    animation:fadeDown 0.8s ease 0.4s both;
  }

  /* ‚îÄ‚îÄ Cards ‚îÄ‚îÄ */
  .cards-container{
    display:flex;
    gap:20px;
    justify-content:center;
    flex-wrap:wrap;
    margin-top:40px;
    animation:fadeUp 0.8s ease 0.5s both;
  }

  .portal-card{
    background:rgba(255,255,255,0.06);
    backdrop-filter:blur(20px);
    -webkit-backdrop-filter:blur(20px);
    border:1px solid rgba(255,255,255,0.1);
    border-radius:var(--radius);
    padding:36px 32px;
    width:300px;
    text-align:center;
    cursor:pointer;
    transition:all 0.3s ease;
    position:relative;
    overflow:hidden;
  }

  .portal-card::before{
    content:'';
    position:absolute;
    inset:0;
    background:linear-gradient(135deg,transparent,rgba(59,130,246,0.08));
    opacity:0;
    transition:opacity 0.3s;
  }

  .portal-card:hover{
    transform:translateY(-6px);
    border-color:rgba(59,130,246,0.4);
    box-shadow:0 20px 50px rgba(59,130,246,0.15);
  }

  .portal-card:hover::before{opacity:1;}

  .card-icon{
    width:64px;
    height:64px;
    border-radius:16px;
    display:flex;
    align-items:center;
    justify-content:center;
    margin:0 auto 20px;
    font-size:28px;
    position:relative;
  }

  .card-icon.visa{
    background:linear-gradient(135deg,rgba(59,130,246,0.2),rgba(99,102,241,0.2));
    color:#60a5fa;
  }

  .card-icon.admin{
    background:linear-gradient(135deg,rgba(168,85,247,0.2),rgba(236,72,153,0.2));
    color:#c084fc;
  }

  .card-title{
    font-size:20px;
    font-weight:700;
    margin-bottom:10px;
    color:#fff;
  }

  .card-desc{
    font-size:14px;
    color:rgba(255,255,255,0.5);
    line-height:1.5;
    margin-bottom:24px;
  }

  .card-btn{
    display:inline-flex;
    align-items:center;
    gap:8px;
    padding:12px 28px;
    border-radius:30px;
    font-size:15px;
    font-weight:600;
    border:none;
    cursor:pointer;
    transition:all 0.3s;
    text-decoration:none;
  }

  .card-btn.visa-btn{
    background:linear-gradient(135deg,var(--primary),var(--accent));
    color:#fff;
  }

  .card-btn.visa-btn:hover{
    box-shadow:0 8px 30px rgba(59,130,246,0.4);
    transform:translateY(-2px);
  }

  .card-btn.admin-btn{
    background:rgba(255,255,255,0.08);
    border:1px solid rgba(255,255,255,0.15);
    color:rgba(255,255,255,0.8);
  }

  .card-btn.admin-btn:hover{
    background:rgba(255,255,255,0.15);
    color:#fff;
  }

  /* ‚îÄ‚îÄ Stats ‚îÄ‚îÄ */
  .stats-bar{
    display:flex;
    gap:40px;
    justify-content:center;
    flex-wrap:wrap;
    margin-top:56px;
    padding-top:40px;
    border-top:1px solid rgba(255,255,255,0.08);
    animation:fadeUp 0.8s ease 0.7s both;
  }

  .stat-item{
    text-align:center;
  }

  .stat-number{
    font-size:28px;
    font-weight:800;
    background:linear-gradient(135deg,#60a5fa,#a78bfa);
    -webkit-background-clip:text;
    -webkit-text-fill-color:transparent;
    background-clip:text;
  }

  .stat-label{
    font-size:13px;
    color:rgba(255,255,255,0.4);
    margin-top:4px;
    text-transform:uppercase;
    letter-spacing:1px;
  }

  /* ‚îÄ‚îÄ Footer ‚îÄ‚îÄ */
  .footer{
    position:relative;
    z-index:2;
    text-align:center;
    padding:24px 20px;
    color:rgba(255,255,255,0.3);
    font-size:13px;
  }

  /* ‚îÄ‚îÄ Password Modal ‚îÄ‚îÄ */
  .modal-overlay{
    display:none;
    position:fixed;
    inset:0;
    background:rgba(0,0,0,0.6);
    backdrop-filter:blur(8px);
    -webkit-backdrop-filter:blur(8px);
    z-index:1000;
    justify-content:center;
    align-items:center;
    padding:20px;
  }

  .modal-overlay.active{
    display:flex;
    animation:fadeIn 0.3s ease;
  }

  .modal-box{
    background:var(--gray-800);
    border:1px solid rgba(255,255,255,0.1);
    border-radius:var(--radius);
    padding:36px;
    width:100%;
    max-width:400px;
    text-align:center;
    animation:scaleIn 0.3s ease;
  }

  .modal-icon{
    width:56px;
    height:56px;
    border-radius:14px;
    background:linear-gradient(135deg,rgba(168,85,247,0.2),rgba(236,72,153,0.2));
    display:flex;
    align-items:center;
    justify-content:center;
    margin:0 auto 20px;
    font-size:24px;
  }

  .modal-title{
    font-size:20px;
    font-weight:700;
    margin-bottom:8px;
    color:#fff;
  }

  .modal-desc{
    font-size:14px;
    color:var(--gray-400);
    margin-bottom:24px;
  }

  .modal-input{
    width:100%;
    padding:14px 18px;
    background:rgba(255,255,255,0.06);
    border:1px solid rgba(255,255,255,0.12);
    border-radius:12px;
    color:#fff;
    font-size:15px;
    text-align:center;
    letter-spacing:3px;
    outline:none;
    transition:border-color 0.3s;
    margin-bottom:8px;
  }

  .modal-input:focus{
    border-color:var(--accent);
  }

  .modal-input.error{
    border-color:#ef4444;
    animation:shake 0.4s ease;
  }

  .modal-error{
    color:#ef4444;
    font-size:13px;
    min-height:20px;
    margin-bottom:16px;
  }

  .modal-btns{
    display:flex;
    gap:12px;
  }

  .modal-btn{
    flex:1;
    padding:12px;
    border-radius:12px;
    font-size:15px;
    font-weight:600;
    border:none;
    cursor:pointer;
    transition:all 0.3s;
  }

  .modal-btn.cancel{
    background:rgba(255,255,255,0.06);
    color:rgba(255,255,255,0.6);
  }

  .modal-btn.cancel:hover{
    background:rgba(255,255,255,0.1);
  }

  .modal-btn.submit{
    background:linear-gradient(135deg,#7c3aed,#a855f7);
    color:#fff;
  }

  .modal-btn.submit:hover{
    box-shadow:0 8px 25px rgba(168,85,247,0.3);
  }

  .modal-btn:disabled{
    opacity:0.5;
    cursor:not-allowed;
  }

  /* ‚îÄ‚îÄ Particles ‚îÄ‚îÄ */
  .particles{
    position:absolute;
    inset:0;
    z-index:1;
    overflow:hidden;
    pointer-events:none;
  }

  .particle{
    position:absolute;
    width:3px;
    height:3px;
    background:rgba(255,255,255,0.15);
    border-radius:50%;
    animation:float linear infinite;
  }

  /* ‚îÄ‚îÄ Animations ‚îÄ‚îÄ */
  @keyframes fadeDown{
    from{opacity:0;transform:translateY(-20px);}
    to{opacity:1;transform:translateY(0);}
  }

  @keyframes fadeUp{
    from{opacity:0;transform:translateY(20px);}
    to{opacity:1;transform:translateY(0);}
  }

  @keyframes fadeIn{
    from{opacity:0;}
    to{opacity:1;}
  }

  @keyframes scaleIn{
    from{opacity:0;transform:scale(0.9);}
    to{opacity:1;transform:scale(1);}
  }

  @keyframes shake{
    0%,100%{transform:translateX(0);}
    25%{transform:translateX(-8px);}
    50%{transform:translateX(8px);}
    75%{transform:translateX(-4px);}
  }

  @keyframes float{
    0%{transform:translateY(100vh) rotate(0deg);opacity:0;}
    10%{opacity:1;}
    90%{opacity:1;}
    100%{transform:translateY(-10vh) rotate(720deg);opacity:0;}
  }

  /* ‚îÄ‚îÄ Responsive ‚îÄ‚îÄ */
  @media(max-width:680px){
    .cards-container{flex-direction:column;align-items:center;}
    .portal-card{width:100%;max-width:340px;}
    .stats-bar{gap:24px;}
    .stat-number{font-size:24px;}
  }
</style>
</head>
<body>

<div class="hero">
  <!-- Background -->
  <div class="hero-bg">
    <img id="heroBgImg" src="" alt="" style="display:none;">
    <div class="hero-bg-gradient"></div>
  </div>

  <!-- Floating Particles -->
  <div class="particles" id="particles"></div>

  <!-- Content -->
  <div class="hero-content">
    <!-- Org Badge -->
    <div class="org-badge">
      <div id="orgLogoWrap"></div>
      <span class="org-name" id="orgNameText">Loading...</span>
    </div>

    <!-- Title -->
    <h1 class="hero-title" id="heroTitle">Welcome to the Official Visa Portal</h1>
    <p class="hero-subtitle" id="heroSubtitle">Fast, secure, and transparent visa processing</p>

    <!-- Announcement -->
    <div class="announcement" id="announcement" style="display:none;"></div>

    <!-- Portal Cards -->
    <div class="cards-container">
      <!-- Visa Application Card -->
      <div class="portal-card" onclick="goToPortal()">
        <div class="card-icon visa">
          <svg width="28" height="28" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24"><rect x="2" y="3" width="20" height="18" rx="3"/><line x1="2" y1="9" x2="22" y2="9"/><circle cx="8" cy="15" r="2"/><line x1="14" y1="13" x2="19" y2="13"/><line x1="14" y1="16" x2="18" y2="16"/></svg>
        </div>
        <h3 class="card-title" id="portalBtnText">Apply for Visa</h3>
        <p class="card-desc">Submit your visa application online with our streamlined digital process</p>
        <span class="card-btn visa-btn">
          Get Started
          <svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="2.5" viewBox="0 0 24 24"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
        </span>
      </div>

      <!-- Admin Card -->
      <div class="portal-card" onclick="showPasswordModal()">
        <div class="card-icon admin">
          <svg width="28" height="28" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24"><rect x="3" y="11" width="18" height="11" rx="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/><circle cx="12" cy="16" r="1"/></svg>
        </div>
        <h3 class="card-title" id="adminBtnText">Admin Portal</h3>
        <p class="card-desc">Manage applications, review submissions, and control system settings</p>
        <span class="card-btn admin-btn">
          Sign In
          <svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="2.5" viewBox="0 0 24 24"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
        </span>
      </div>
    </div>

    <!-- Stats -->
    <div class="stats-bar">
      <div class="stat-item">
        <div class="stat-number">24/7</div>
        <div class="stat-label">Available</div>
      </div>
      <div class="stat-item">
        <div class="stat-number">100%</div>
        <div class="stat-label">Digital</div>
      </div>
      <div class="stat-item">
        <div class="stat-number">Fast</div>
        <div class="stat-label">Processing</div>
      </div>
      <div class="stat-item">
        <div class="stat-number">Secure</div>
        <div class="stat-label">& Encrypted</div>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <div class="footer" id="footerText"></div>
</div>

<!-- Password Modal -->
<div class="modal-overlay" id="passwordModal">
  <div class="modal-box">
    <div class="modal-icon">üîê</div>
    <h3 class="modal-title">Admin Access</h3>
    <p class="modal-desc">Enter the administrator password to continue</p>
    <input type="password" class="modal-input" id="adminPwdInput" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" maxlength="50" onkeydown="if(event.key==='Enter')verifyPassword();" oninput="clearError();">
    <div class="modal-error" id="pwdError"></div>
    <div class="modal-btns">
      <button class="modal-btn cancel" onclick="hidePasswordModal()">Cancel</button>
      <button class="modal-btn submit" id="pwdSubmitBtn" onclick="verifyPassword()">Access</button>
    </div>
  </div>
</div>

<script>
  <!-- var BASE_URL = '';
  var settings = {};

  // Get the base URL of this web app
  function getBaseUrl() {
    var url = window.location.href;
    // Remove any query parameters
    var idx = url.indexOf('?');
    if (idx > -1) url = url.substring(0, idx);
    return url;
  }
-->
  // Initialize
  
  
    var APP_URL = '';

  (function init() {
    createParticles();

    // Get the web app URL from server
    google.script.run
      .withSuccessHandler(function(url) {
        APP_URL = url;
      })
      .getWebAppUrl();

    // Load settings
    google.script.run
      .withSuccessHandler(function(s) {
        settings = s || {};
        applySettings();
      })
      .withFailureHandler(function() {
        applySettings();
      })
      .getLandingSettings();
  })();

  function goToPortal() {
    if (APP_URL) {
      window.open(APP_URL + '?page=portal', '_top');
    }
  }

  function goToAdmin() {
    if (APP_URL) {
      window.open(APP_URL + '?page=admin', '_top');
    }
  }
  

  function applySettings() {
    var s = settings;

    // Org name
    document.getElementById('orgNameText').textContent = s.orgName || 'Republic of Veridian';

    // Logo
    var logoWrap = document.getElementById('orgLogoWrap');
    if (s.logoUrl) {
      logoWrap.innerHTML = '<img class="org-logo" src="' + s.logoUrl + '" onerror="this.outerHTML=\'<div class=org-logo-placeholder>' + (s.orgName || 'V').charAt(0) + '</div>\'">';
    } else {
      logoWrap.innerHTML = '<div class="org-logo-placeholder">' + (s.orgName || 'V').charAt(0) + '</div>';
    }

    // Hero
    document.getElementById('heroTitle').textContent = s.heroTitle || 'Welcome to the Official Visa Portal';
    document.getElementById('heroSubtitle').textContent = s.heroSubtitle || 'Fast, secure, and transparent visa processing for travelers worldwide';

    // Hero background image
    if (s.heroImageUrl) {
      var img = document.getElementById('heroBgImg');
      img.src = s.heroImageUrl;
      img.style.display = 'block';
    }

    // Buttons
    document.getElementById('portalBtnText').textContent = s.portalButtonText || 'Apply for Visa';
    document.getElementById('adminBtnText').textContent = s.adminButtonText || 'Admin Portal';

    // Announcement
    if (s.announcementText) {
      var ann = document.getElementById('announcement');
      ann.textContent = s.announcementText;
      ann.style.display = 'inline-block';
    }

    // Footer
    document.getElementById('footerText').textContent = s.footerText || '¬© 2026 Visa Portal';

    // Colors
    if (s.primaryColor) document.documentElement.style.setProperty('--primary', s.primaryColor);
    if (s.accentColor) document.documentElement.style.setProperty('--accent', s.accentColor);

    // Update page title
    document.title = (s.orgName || 'Visa') + ' ‚Äî Visa Portal';
  }
  
  
    function goToPortal() {
    document.body.innerHTML = '<div style="display:flex;justify-content:center;align-items:center;height:100vh;color:#fff;font-size:18px;">Loading Visa Portal...</div>';
    google.script.run
      .withSuccessHandler(function(html) {
        document.open();
        document.write(html);
        document.close();
      })
      .withFailureHandler(function(err) {
        alert('Error loading portal: ' + err.message);
      })
      .getPageContent('portal');
  }

  function goToAdmin() {
    document.body.innerHTML = '<div style="display:flex;justify-content:center;align-items:center;height:100vh;color:#fff;font-size:18px;">Loading Admin Portal...</div>';
    google.script.run
      .withSuccessHandler(function(html) {
        document.open();
        document.write(html);
        document.close();
      })
      .withFailureHandler(function(err) {
        alert('Error loading portal: ' + err.message);
      })
      .getPageContent('admin');
  }
  

  // ‚îÄ‚îÄ Password Modal ‚îÄ‚îÄ
  function showPasswordModal() {
    document.getElementById('passwordModal').classList.add('active');
    document.getElementById('adminPwdInput').value = '';
    document.getElementById('pwdError').textContent = '';
    document.getElementById('adminPwdInput').classList.remove('error');
    setTimeout(function() {
      document.getElementById('adminPwdInput').focus();
    }, 300);
  }

  function hidePasswordModal() {
    document.getElementById('passwordModal').classList.remove('active');
  }

  function clearError() {
    document.getElementById('adminPwdInput').classList.remove('error');
    document.getElementById('pwdError').textContent = '';
  }

  function verifyPassword() {
    var pwd = document.getElementById('adminPwdInput').value.trim();
    if (!pwd) {
      document.getElementById('pwdError').textContent = 'Please enter a password';
      document.getElementById('adminPwdInput').classList.add('error');
      return;
    }

    var btn = document.getElementById('pwdSubmitBtn');
    btn.disabled = true;
    btn.textContent = 'Verifying...';

    google.script.run
      .withSuccessHandler(function(valid) {
        btn.disabled = false;
        btn.textContent = 'Access';
        if (valid) {
          goToAdmin();
        } else {
          document.getElementById('pwdError').textContent = 'Incorrect password';
          document.getElementById('adminPwdInput').classList.add('error');
          document.getElementById('adminPwdInput').value = '';
          document.getElementById('adminPwdInput').focus();
        }
      })
      .withFailureHandler(function(err) {
        btn.disabled = false;
        btn.textContent = 'Access';
        document.getElementById('pwdError').textContent = 'Error: ' + (err.message || 'Try again');
      })
      .verifyAdminPassword(pwd);
  }

  // Close modal on overlay click
  document.getElementById('passwordModal').addEventListener('click', function(e) {
    if (e.target === this) hidePasswordModal();
  });

  // ‚îÄ‚îÄ Particles ‚îÄ‚îÄ
  function createParticles() {
    var container = document.getElementById('particles');
    for (var i = 0; i < 30; i++) {
      var p = document.createElement('div');
      p.className = 'particle';
      p.style.left = Math.random() * 100 + '%';
      p.style.animationDuration = (8 + Math.random() * 15) + 's';
      p.style.animationDelay = (Math.random() * 10) + 's';
      p.style.width = p.style.height = (2 + Math.random() * 3) + 'px';
      container.appendChild(p);
    }
  }
</script>

</body>
</html>

